<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Oline Learning Diary - 5&nbsp; Indonesia’s giant capital city is sinking-A case study of Jakarta’s flooding solution</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./week6_GEE.html" rel="next">
<link href="./week3_Correction.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./week4_Policy.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">**Indonesia's giant capital city is sinking-**A case study of **Jakarta's flooding solution**</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Oline Learning Diary</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week1_Introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to Remote Sensing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_Xaringan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Xaringan</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week3_Correction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Correction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week4_Policy.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title"><strong>Indonesia’s giant capital city is sinking-</strong>A case study of <strong>Jakarta’s flooding solution</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week6_GEE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Introduction to GEE</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week7_Classification1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Classification 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week8_Classification2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Classification 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week9_Temperature.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Temperature</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">5.1</span> Summary</a>
  <ul class="collapse">
  <li><a href="#metropolitan-policy" id="toc-metropolitan-policy" class="nav-link" data-scroll-target="#metropolitan-policy"><span class="header-section-number">5.1.1</span> <strong>Metropolitan Policy</strong></a></li>
  <li><a href="#national-policy" id="toc-national-policy" class="nav-link" data-scroll-target="#national-policy"><span class="header-section-number">5.1.2</span> National Policy</a></li>
  <li><a href="#international-policy" id="toc-international-policy" class="nav-link" data-scroll-target="#international-policy"><span class="header-section-number">5.1.3</span> International Policy</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">5.2</span> Application</a>
  <ul class="collapse">
  <li><a href="#impact-on-petajakarta.org" id="toc-impact-on-petajakarta.org" class="nav-link" data-scroll-target="#impact-on-petajakarta.org"><span class="header-section-number">5.2.1</span> <strong>Impact on</strong> PetaJakarta.org</a></li>
  <li><a href="#impact-on-ncicd" id="toc-impact-on-ncicd" class="nav-link" data-scroll-target="#impact-on-ncicd"><span class="header-section-number">5.2.2</span> <strong>Impact on</strong> NCICD</a></li>
  </ul></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection"><span class="header-section-number">5.3</span> Reflection</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">5.4</span> References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title"><strong>Indonesia’s giant capital city is sinking-</strong>A case study of <strong>Jakarta’s flooding solution</strong></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">5.1</span> Summary</h2>
<p>Jakarta is the cultural, political and economical heart of Indonesia. This huge cosmopolitan city is with 28 million inhabitants in its metropolitan area, one of the most densely populated cities of South East Asia. However, the Jakarta floods in early 2021 shows how the city’s drainage network can no longer accommodate rainfall, resulting in floods in various locations.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/flood.jpg" class="img-fluid figure-img"></p>
</figure>
</div>
<p>Aside from drainage issues, there are three key contributing factors to Jakarta’s flooding:</p>
<ul>
<li><p><strong>Extreme rainfall:</strong> Highly intense and short extreme rainfall is becoming more frequent. Extreme rainfall is a direct result of the climate crisis.</p></li>
<li><p><strong>Changes in land cover:</strong> Land cover data from the Ministry of Environment and Forestry (MOEF) for 2000 and 2019 show growing plantation forests by up to 117.7 percent upstream of the river that flows into Jakarta, replacing agricultural lands. Settlement areas have also grown rapidly by 47.4 percent, replacing agricultural lands and green open spaces in central and downstream areas. Green open space only made up 9.8 percent of Jakarta’s area by 2019. This has increased the risk of overflowing rivers and drainage networks due to high volume of runoff, water, not to mention the threat of sedimentation in rivers due to high erosion rates in upstream areas.</p></li>
<li><p><strong>Land subsidence:</strong> Land subsidence in Jakarta averages at 12 cm/year. It is even more extreme in the northern coast with a subsidence rate of up to 25cm/year. According to Takagi et al.&nbsp;(2015), subsidence-related flooding will expand by 100.5 km2 by 2050, covering 75 percent of North Jakarta. Building loads and excess groundwater extraction have further accelerated land subsidence. Currently, around 35% of Jakarta residents still use groundwater for their daily needs. As a result, Jakarta’s groundwater level and water storage capacity have continued to decline.</p></li>
</ul>
<section id="metropolitan-policy" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="metropolitan-policy"><span class="header-section-number">5.1.1</span> <strong>Metropolitan Policy</strong></h3>
<p>PetaJakarta.org is a research project led by the SMART Infrastructure Facility, University of Wollongong in collaboration with the Jakarta Emergency Management Agency (BPBD DKI Jakarta) and Twitter Inc.&nbsp;The project enabled Jakarta’s citizens to report the locations of flood events using the social media network Twitter, thereby contributing to a publicly accessible real-time map of flood conditions at PetaJakarta.org. These data were used by BPBD DKI Jakarta to cross-validate formal reports of flooding from traditional data sources, supporting the creation of information for flood assessment, response, and management in real-time.</p>
</section>
<section id="national-policy" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="national-policy"><span class="header-section-number">5.1.2</span> National Policy</h3>
<p>Indonesia’s 2007 Spatial Planning Act is essential to increasing water capacity by requiring all urban areas to set aside 30% of the city land for green space, such as city parks, cemeteries, and green roads. In Jakarta, currently only 10% of the city is green open space, accordingto an analysis by the United Nations Research Institute for Social Development (UNRISD), suggesting a lack ofenforcement for national spatial planning laws at the city level. Jakarta’s most substantial infrastructure response to climate change is the $40 billion National Capital IntegratedCoastal Development (NCICD), which includes the development of a water reservoir, reclamation of land, andconstruction of a seawall along the coast (The Giant Swa Wall of Jakarta), designed to protect the mainland fromtidal flooding.However, the seawall’s projected completion date has been delayed due to stalled negotiations, as the DKI administration is still negotiating with the national Public Works and Public Housing Ministry about which projects will be led by which government bodies (Rahadryan, 2019).</p>
</section>
<section id="international-policy" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="international-policy"><span class="header-section-number">5.1.3</span> International Policy</h3>
<p>On December 19, 2022, the World Bank’s Board of Executive Directors approved a US$400 million loan to support the Government of Indonesia in protecting an estimated 6.3 million people in cities across Indonesia from damage caused by flooding and in bolstering national flood resilience management. The National Urban Flood Resilience Project (NUFReP)&nbsp;will help cities reduce the flood risk by increasing national and city-level flood risk management capacity and through investments for integrated urban flood risk management. It will also support the government in establishing and operationalizing a national urban flood resilience program. The national urban flood resilience program supported by NUFReP will offer a menu of measures to help cities with different flood and climate risks in an integrated manner. This program will serve as a national umbrella program to help coordinate sources of financing and function as a knowledge hub to help Indonesian cities leverage good practices and continuously advance sector policy, practice, and innovation.</p>
</section>
</section>
<section id="application" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="application"><span class="header-section-number">5.2</span> Application</h2>
<p>Some researches have already verified that RS techniques can be significantly useful in mapping the flood-affected areas, calculating the dimensions of the flooded area and providing critical information for future disaster preparedness (Mutiara, 2019; Dinuke, 2018). Data from Landsat-8 are utilized which providing multispectral images with eight bands at a spatial resolution of 30 meters, a panchromatic band at 15 meters, and two thermal bands at 100 meters. In Indonesia, there is a government agency which is formed for organizing and providingremote sensing data. The Deputy of Remote Sensing Department of National Institute of Aeronautics and Space, Indonesia (LAPAN) has already obtained an authority to provide Landsat data.</p>
<p>The integration of Landsat satellite data can positively impact Jakarta’s policy and Indonesia’s policy.</p>
<section id="impact-on-petajakarta.org" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="impact-on-petajakarta.org"><span class="header-section-number">5.2.1</span> <strong>Impact on</strong> PetaJakarta.org</h3>
<ul>
<li><p><strong>Data Verification and Supplement</strong>: Landsat satellite data can independently verify flood conditions reported by users on Twitter. By comparing the flood extent in satellite imagery with community reports, the actual situation of the flood, including its spread and severity, can be understood more accurately.</p></li>
<li><p><strong>Enhanced Flood Monitoring Capability</strong>: Combining community reports with Landsat data can create a more comprehensive flood monitoring system. Landsat’s broad view and high spatiotemporal resolution imagery can capture flood events that Twitter reports might miss, making flood monitoring more comprehensive and timely.</p></li>
</ul>
</section>
<section id="impact-on-ncicd" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="impact-on-ncicd"><span class="header-section-number">5.2.2</span> <strong>Impact on</strong> NCICD</h3>
<ul>
<li><p><strong>Planning and Optimization of Embankment Location</strong>: Landsat data can provide detailed terrain and land cover information of river basins, helping decision-makers more accurately plan the location and design of embankments. By analyzing changes in the land surface before and after floods, areas frequently affected by flooding can be identified, guiding the optimal layout of embankments.</p></li>
<li><p><strong>Environmental Impact Assessment</strong>: Before the construction of embankments, Landsat satellite data can be used to assess the potential environmental impact of the plan. By monitoring changes in vegetation cover, hydrological conditions, and surface temperature of the construction area, the project’s impact on ecosystems can be predicted, providing a basis for formulating mitigation measures.</p></li>
<li><p><strong>Project Supervision and Effectiveness Evaluation</strong>: After the construction of embankments, Landsat data can be used to monitor the long-term effects and maintenance status of the project. By regularly comparing satellite images of the flood control area, the effectiveness of the embankments in flood prevention and potential issues can be assessed, providing information support for subsequent improvements.</p></li>
</ul>
</section>
</section>
<section id="reflection" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="reflection"><span class="header-section-number">5.3</span> Reflection</h2>
<p>From the aforementioned case analysis, policies addressing urban issues are usually comprised of different levels. International policies tend to be comprehensive and broad, outlining general development directions or involving resource assistance from developed countries to others. Thus, international policies focus on the determination of overall directions and the allocation of resources. National policies typically further analyze problems within a country and propose a feasible plan. However, these plans usually take a long time to complete but have significant effectiveness in solving problems. Therefore, national policies focus on long-term effects. Urban policies often complement national policies, achieving some effects with smaller investments, but many times they cannot fundamentally solve problems. Hence, urban policies focus on short-term effects. In the aforementioned case, the application of RS data can enhance the effectiveness of urban policies, providing validation and supplement for PetaJakarta.org. It can also optimize solutions within national policies, improving the construction locations of embankments; at the same time, it minimizes losses before the completion of national policies by predicting and assessing disasters for floods occurring during riverside construction. The success of national policy plans can also be promoted to other countries through international policies as a model. Other countries affected by flooding can gain experience from Jakarta’s case in RS data application, the public online flood reporting community, and embankment construction projects, fostering global collective development.</p>
</section>
<section id="references" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="references"><span class="header-section-number">5.4</span> References</h2>
<p>Wals, Jorian. (2015). ‘Flood Resilient Cities - An Jakarta Case Study’. 10.13140/RG.2.1.3463.9840.</p>
<p>Hiroshi Takagi, Miguel Esteban, Takahito Mikami, Daisuke Fujii. (2016) ‘Projection of coastal floods in 2050 Jakarta’, <em>Urban Climate</em> 17, pp.&nbsp;135-145, https://doi.org/10.1016/j.uclim.2016.05.003.</p>
<p>Tomas Holderness &amp; Etienne Turpin, ‘White Paper ‑ PetaJakarta.org:<br>
Assessing the Role of Social Media for Civic Co‑Management During Monsoon Flooding<br>
in Jakarta, Indonesia’, <em>SMART Infrastructure Facility, University of Wollongong</em></p>
<p>Rahadryan, A. (2019). Jakarta infrastructure: NCICD sea wall project delayed until 2022. <em>PWC Indonesia</em>.</p>
<p>George, Elisha, et al.&nbsp;(2020). ‘JAKARTA POLICY BRIEF’, <em>CITY RESILIENCY AND CLIMATE CHANGE: A REPORT FROM THE INTER-POLICY SCHOOL SUMMIT 2020</em>, pp.&nbsp;27–32, https://www.jstor.org/stable/resrep42654.7</p>
<p>Syifa, Mutiara, et al.&nbsp;(2019). ’Flood Mapping Using Remote Sensing Imagery and Artificial Intelligence Techniques: A Case Study in Brumadinho, Brazil.” <em>Journal of Coastal Research</em>, pp.&nbsp;197–204. <em>JSTOR</em>, https://www.jstor.org/stable/26778954</p>
<p>Munasinghe,&nbsp;Dinuke,&nbsp;Sagy Cohen,&nbsp;Yu-Fen Huang,&nbsp;Yin-Phan Tsang,&nbsp;Jiaqi Zhang, and&nbsp;Zheng Fang,&nbsp;(2018).&nbsp;‘Intercomparison of Satellite Remote Sensing-Based Flood Inundation Mapping Techniques’.&nbsp;<em>Journal of the American Water Resources Association</em>&nbsp;(JAWRA)&nbsp;54(4), pp.&nbsp;834–846.&nbsp;https://doi-org.libproxy.ucl.ac.uk/10.1111/1752-1688.12626</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week3_Correction.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Correction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./week6_GEE.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Introduction to GEE</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>