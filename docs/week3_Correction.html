<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Oline Learning Diary - 4&nbsp; Correction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./week4_Policy.html" rel="next">
<link href="./week2_Xaringan.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./week3_Correction.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Correction</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Oline Learning Diary</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week1_Introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to Remote Sensing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_Xaringan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Xaringan</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week3_Correction.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Correction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week4_Policy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title"><strong>Indonesia’s giant capital city is sinking-</strong>A case study of <strong>Jakarta’s flooding solution</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week6_GEE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Introduction to GEE</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week7_Classification1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Classification 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week8_Classification2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Classification 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week9_Temperature.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Temperature</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">4.1</span> Summary</a>
  <ul class="collapse">
  <li><a href="#dark-object-subtraction" id="toc-dark-object-subtraction" class="nav-link" data-scroll-target="#dark-object-subtraction"><span class="header-section-number">4.1.1</span> Dark Object Subtraction</a></li>
  <li><a href="#image-enhancements" id="toc-image-enhancements" class="nav-link" data-scroll-target="#image-enhancements"><span class="header-section-number">4.1.2</span> <strong>Image Enhancements</strong></a></li>
  <li><a href="#data-fusion-and-principal-component-analysis-pca" id="toc-data-fusion-and-principal-component-analysis-pca" class="nav-link" data-scroll-target="#data-fusion-and-principal-component-analysis-pca"><span class="header-section-number">4.1.3</span> <strong>Data Fusion and Principal Component Analysis (PCA)</strong></a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">4.2</span> Application</a></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection"><span class="header-section-number">4.3</span> Reflection</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">4.4</span> References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Correction</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">4.1</span> Summary</h2>
<p>There are four types of correction in RS.</p>
<ul>
<li><p><strong>Geometric Correction</strong>: This involves the correction of the geometric shape of the image to ensure its accuracy.</p></li>
<li><p><strong>Atmospheric Correction</strong>: This adjusts the image to eliminate the impact of the atmosphere on the observed data.</p></li>
<li><p><strong>Orthorectification/Terrain Correction</strong>: This corrects the image distortion caused by terrain.</p></li>
<li><p><strong>Radiometric Correction</strong>: This adjusts the image data to reflect the true surface radiation values.</p></li>
</ul>
<section id="dark-object-subtraction" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="dark-object-subtraction"><span class="header-section-number">4.1.1</span> Dark Object Subtraction</h3>
<p>In the practical session this week Dark Object Subtraction (DOS) is introduced. DOS is a relatively simple atmospheric correction method used to remove the effects of the atmosphere from satellite imagery, thereby improving the accuracy of the data. The DOS method is based on the logic that the darkest pixel in the satellite image should have zero reflectance; therefore, any value detected can be attributed to the atmospheric effect. By subtracting this value from the rest of the pixels in the image, the impact of the atmosphere can be minimized.</p>
<ol type="1">
<li><p><strong>Selecting the Darkest Pixel</strong>: First, the darkest pixel in the satellite image needs to be identified. This pixel is assumed to have the minimum reflectance, typically close to zero, but due to atmospheric scattering and other effects, it actually has a non-zero value.</p></li>
<li><p><strong>Calculating Atmospheric Influence</strong>: After identifying the darkest pixel, its value (Digital Number, DN) is considered to be caused by atmospheric effects. This value represents the degree of atmospheric influence on the entire image.</p></li>
<li><p><strong>Applying the DOS Formula</strong>: Next, the value of the darkest pixel is subtracted from the values of all other pixels in the image. This step aims to remove the atmospheric increment from the measurement value of each pixel, thereby approximating the true surface reflectance.</p></li>
<li><p><strong>Converting to Reflectance</strong>: After subtracting the atmospheric influence, the corrected DN values need to be converted to reflectance. This usually involves using satellite-specific conversion formulas that take into account the position of the sun, the distance between the Earth and the sun, and other relevant parameters.</p></li>
</ol>
</section>
<section id="image-enhancements" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="image-enhancements"><span class="header-section-number">4.1.2</span> <strong>Image Enhancements</strong></h3>
<p>Several techniques for enhancing satellite imagery are covered, including ratioing (e.g., Normalized Difference Vegetation Index - NDVI), filtering, and texture analysis. These methods help emphasize or exaggerate certain features or spectral traits in the imagery.</p>
</section>
<section id="data-fusion-and-principal-component-analysis-pca" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="data-fusion-and-principal-component-analysis-pca"><span class="header-section-number">4.1.3</span> <strong>Data Fusion and Principal Component Analysis (PCA)</strong></h3>
<p>The page touches on the concept of data fusion, combining different raster datasets to enrich the analysis. It also introduces PCA as a method to reduce the dimensionality of data, making it easier to analyze and interpret.</p>
</section>
</section>
<section id="application" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="application"><span class="header-section-number">4.2</span> Application</h2>
<p>DOS is one of the most effective atmospheric correction methods, as the atmospheric offset can be generated from the image itself.&nbsp;In Sean’s research of DOS effectiveness (Sean, Ashty, Ashraf 2015), their analysis indicates that compared to raw data, DOS-corrected imagery performs better in distinguishing wetland areas.</p>
<p>The study assesses the effectiveness of the DOS method by comparing the image processing results before and after DOS correction. Two sets of images were used: raw images and DOS-corrected images, along with several water indices to analyze and compare their performance in wetland mapping.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/dos.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>(a) The NDWI produced from the raw imagery</p>
<p>(b) Classified NDWI using the optimal threshold</p>
<p>(c) The NDWI produced from the DOS imagery</p>
<p>(d) Classified DOS NDWI using the optimal threshold</p>
<p>(e) The MNDWI produced from the raw imagery</p>
<p>(f) Classified MNDWI using the optimal threshold</p>
<p>(g) The MNDWI produced from the DOS imagery</p>
<p>(h) Classified DOS MNDWI using the optimal threshold</p>
<p>The results show that DOS-corrected images, compared to raw images, exhibit improvements across various accuracy metrics such as overall accuracy, producer’s accuracy, user’s accuracy, and Kappa coefficient. Notably, the MNDWI index demonstrates superior performance on DOS-corrected imagery, achieving an overall accuracy of 98% and a Kappa coefficient exceeding 0.9, indicating that DOS correction significantly enhances the ability to recognize the boundaries between wetland and non-wetland areas. Furthermore, the study found that DOS-corrected images could produce a sharper contrast between wetland and non-wetland areas compared to raw images.</p>
</section>
<section id="reflection" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="reflection"><span class="header-section-number">4.3</span> Reflection</h2>
<p>The DOS method operates by identifying and subtracting the reflectance values of “dark objects” within an image, which are assumed to have minimal or no reflectance and are primarily affected by atmospheric scattering. These dark objects typically include deep water bodies, cloud shadows, or any other feature with very low reflectance. By subtracting this atmospheric contribution, the DOS method aims to bring the imagery closer to true surface reflectance values, thereby improving the interpretability and accuracy of the data. Researches have verified that DOS has the following advantages:</p>
<ol type="1">
<li><p><strong>Improved Accuracy</strong>: DOS-corrected imagery shows a marked improvement in distinguishing wetland areas, with significant enhancements in overall accuracy, producer’s accuracy, user’s accuracy, and Kappa coefficient metrics compared to uncorrected raw images.</p></li>
<li><p><strong>Efficiency</strong>: DOS is recognized for its simplicity and efficiency, requiring fewer inputs and less complex processing than more robust atmospheric correction methods, such as the Fast Line-of-sight Atmospheric Analysis of Spectral Hypercubes (FLAASH). This makes DOS particularly useful in areas where detailed atmospheric data are unavailable.</p></li>
<li><p><strong>Flexibility in Dark Target Selection</strong>: Research indicates that non-ideal dark targets, such as cloud-shadow pixels or the minimum reflectance value within an image, can effectively serve as alternatives to the ideal dark target of optically-deep water. This flexibility ensures the method’s applicability across diverse landscapes where ideal dark objects may not be present.</p></li>
</ol>
</section>
<section id="references" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="references"><span class="header-section-number">4.4</span> References</h2>
<p>Gilmore, S. and Saleem, A. and Dewan, A. (2015). ‘Effectiveness of DOS (Dark-Object Subtraction) method and water index techniques to map wetlands in a rapidly urbanising megacity with Landsat 8 data’, <em>Proceedings of Research@Locate in conjunction with the annual conference on spatial information in Australia and New Zealand</em>, 1323, pp.&nbsp;100-108</p>
<p>Wicaksono, P. and Hafizt, M. (2018). ‘Dark target effectiveness for dark‐object subtraction atmospheric correction method on mangrove above‐ground carbon stock mapping’. <em>IET Image Processing</em>, 12(4), pp.&nbsp;582-587. https://doi.org/10.1049/iet-ipr.2017.0295</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week2_Xaringan.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Xaringan</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./week4_Policy.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title"><strong>Indonesia’s giant capital city is sinking-</strong>A case study of <strong>Jakarta’s flooding solution</strong></span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>